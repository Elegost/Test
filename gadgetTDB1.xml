<?xml version="1.0" encoding="UTF-8" ?>
<Module>
   <ModulePrefs title="Gadget TDB 1"
                description="Gadget permettant d'afficher des graphiques en fonction d'un fichier Spreadsheet"
                height="800" width="600" 
                author="EL3GOST">
    <Require feature="dynamic-height"/>
  </ModulePrefs>
  <UserPref name="idSite" display_name="Identifiant du site" default_value="modele" />
   <Content type="html"><![CDATA[
   var prefs = new gadgets.Prefs();

	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

<div class="textRes" id="main"> </div>

<form id="forme_site">
  <div class="input"><label>Nom du site * : </label><input type="text" name="site_name" id="site_name" required /></div>
  
  <div class="submit"><input type="button" class="create" value="Lancer" onclick="goToSiteNameSet()" />
  <div id="spinner" style="display: none;"><img src="https://lh3.googleusercontent.com/mhggb7iRqaNHcZLDnqJIZJbaiK5jjdm42uBiSlKPJePzCUxgS8vX=s32-no"  alt="loading..."/></div></div>
</form>
<div id="output"></div>
<div id="error_message" class="error" ></div>
  


 <script>
    google.load('visualization', '1', {
      packages: ['corechart', 'bar']
    });
    google.setOnLoadCallback(repriseContenu);

    function repriseContenu() {
      google.script.run.withSuccessHandler(writeRes).repriseContenu();
    }

    function writeRes(res) {
      document.getElementById("main").innerHTML += res;
    }
    
  </script>


   ]]>
  </Content>
</Module>
